# README: ETL-Архитектура Университета (OULAD)
Этот проект демонстрирует полностью автоматизированный ETL-конвейер (Extract, Transform, Load) с использованием Docker и MongoDB. Проект загружает исходные данные OULAD, денормализует их и оптимизирует базу данных для аналитических запросов.
## Быстрый Запуск
Для развертывания проекта и запуска ETL-конвейера выполните одну команду:

**docker-compose up --build**
### Важное Примечание о Загрузке Данных
После запуска контейнер university-grades-mongo автоматически начинает загрузку и обработку данных (ETL). Этот процесс занимает несколько минут и выполняется в фоновом режиме.

Чтобы отслеживать прогресс загрузки и убедиться в успешном завершении миграции и очистки данных, необходимо просматривать логи контейнера.
#### Просмотр логов контейнера в реальном времени
**docker logs -f university-grades-mongo**

## Команды для Управления Проектом
Команда|Описание|
|------------------------|--------|
docker-compose up --build|Основная команда: Собирает образ (если необходимо) и запускает сервис MongoDB, инициируя весь ETL-процесс.|
docker-compose stop|Останавливает запущенный контейнер, сохраняя при этом все данные (mongo-data).|
docker-compose down|Останавливает контейнер и удаляет сеть|
docker-compose down -v|Очистка: Останавливает контейнер и удаляет все сохраненные данные (тома mongo-data). Используйте для чистого перезапуска ETL.|

## Архитектура и Процесс ETL
Проект использует Docker Entrypoint для оркестрации миграции данных в строгой последовательности:

|Файл|Назначение|Описание|
|-----|-------|--------|
03-douwnload-and-import.sh|Extract & Load|Скачивает ZIP-архив и запускает mongoimport для загрузки сырых данных в коллекции raw_*.|
04-schemas.js|Validation|Применяет JSON Schema Validation к целевым коллекциям (students, grades), гарантируя целостность данных.|
05-full-setup.sh|Orchestrator|Управляет последовательным запуском всех этапов трансформации (migrate.js, clean.js, index.js) после завершения загрузки.|
migrate.js|Transform|Выполняет денормализацию данных и создает целевые коллекции (students, grades, courses).|
clean.js|Data Integrity|Удаляет дубликаты из коллекции students (ключевой этап перед индексацией).|
index.js|Optimization|Создает необходимые индексы, включая уникальный индекс на id_student, подтверждая успешность этапа очистки.|

## Проверка Статуса Базы Данных
После того как логи перестанут обновляться (или покажут сообщение об успешном завершении миграции), вы можете подключиться к контейнеру для проверки данных:

- Зайдите в контейнер:

**docker exec -it university-grades-mongo bash**

- Подключитесь к MongoDB (используя данные из docker-compose.yml):

**mongosh -u root -p example --authenticationDatabase admin**

- Проверьте коллекции и индексы:

**use university;**

**show collections;**

**db.students.getIndexes();**

